# ë½€ëª¨ë„ë¡œ íƒ€ì´ë¨¸ - ê¸°ìˆ  ì„¤ê³„ì„œ

> **ì‘ì„±ì¼**: 2026-02-15  
> **ì‘ì„±ì**: ë‚˜íƒ€ìƒ¤ (ê°œë°œíŒ€)  
> **ë²„ì „**: v1.0

---

## 1. ì•„í‚¤í…ì²˜

### 1.1 MVVM êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   View      â”‚ â†â”€â”€ â”‚   ViewModel     â”‚ â†â”€â”€ â”‚   Model     â”‚
â”‚ TimerView   â”‚     â”‚ TimerViewModel  â”‚     â”‚ TimerState  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ NotificationMgr â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 íŒŒì¼ êµ¬ì¡°

```
FocusTimer/
â”œâ”€â”€ FocusTimerApp.swift      # @main, AppDelegate
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ TimerState.swift     # TimerMode, TimerState
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ TimerViewModel.swift # íƒ€ì´ë¨¸ ë¡œì§
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ TimerView.swift      # SwiftUI View
â””â”€â”€ Utilities/
    â””â”€â”€ NotificationManager.swift
```

---

## 2. í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 2.1 TimerState (Model)

```swift
enum TimerMode {
    case focus   // 25ë¶„
    case rest    // 5ë¶„
    case idle    // ëŒ€ê¸°
}

struct TimerState {
    var mode: TimerMode
    var remainingSeconds: TimeInterval
    var isRunning: Bool
    var completedSessions: Int
}
```

### 2.2 TimerViewModel

| ë©”ì„œë“œ | ì—­í•  |
|--------|------|
| `start()` | íƒ€ì´ë¨¸ ì‹œì‘ |
| `pause()` | ì¼ì‹œì •ì§€ |
| `reset()` | ì´ˆê¸°í™” |
| `toggle()` | ì‹œì‘/ì •ì§€ í† ê¸€ |

**íƒ€ì´ë¨¸ ë¡œì§**:
```swift
Timer.scheduledTimer(withTimeInterval: 1, repeats: true) { _ in
    tick()
}
```

### 2.3 í”Œë¡œíŒ… ìœˆë„ìš° (AppDelegate)

```swift
floatingWindow = NSPanel(
    contentRect: NSRect(x: 0, y: 0, width: 220, height: 170),
    styleMask: [.nonactivatingPanel, .fullSizeContentView],
    backing: .buffered,
    defer: false
)

// í•µì‹¬ ì„¤ì •
floatingWindow.level = .floating
floatingWindow.isMovableByWindowBackground = true
floatingWindow.backgroundColor = .clear
```

---

## 3. ê¸°ìˆ  ê²°ì •ì‚¬í•­

### 3.1 NSPanel vs NSWindow

| í•­ëª© | NSPanel | NSWindow |
|------|---------|----------|
| í”Œë¡œíŒ… | âœ… ê¸°ë³¸ ì§€ì› | âš ï¸ ì„¤ì • í•„ìš” |
| ë¹„í™œì„±í™” íŒ¨ë„ | âœ… `.nonactivatingPanel` | âŒ |
| ìš©ë„ | ë³´ì¡° UI, íŒ”ë ˆíŠ¸ | ë©”ì¸ ìœˆë„ìš° |

**ê²°ë¡ **: NSPanelì´ í”Œë¡œíŒ… UIì— ìµœì í™”

### 3.2 Timer êµ¬í˜„

```swift
// âŒ í”¼í•´ì•¼ í•  ë°©ì‹ (ì •í™•ë„ ë‚®ìŒ)
DispatchQueue.main.asyncAfter(deadline: .now() + 1)

// âœ… ì„ íƒí•œ ë°©ì‹
Timer.scheduledTimer(withTimeInterval: 1, repeats: true)
```

### 3.3 @MainActor ì‚¬ìš©

```swift
@MainActor
class TimerViewModel: ObservableObject {
    // UI ì—…ë°ì´íŠ¸ëŠ” ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ
}
```

---

## 4. ì•Œë¦¼ ì‹œìŠ¤í…œ

### 4.1 ê¶Œí•œ ìš”ì²­

```swift
UNUserNotificationCenter.current()
    .requestAuthorization(options: [.alert, .sound])
```

### 4.2 ì•Œë¦¼ ì „ì†¡

```swift
let content = UNMutableNotificationContent()
content.title = "ì§‘ì¤‘ ì™„ë£Œ! ğŸ…"
content.body = "5ë¶„ íœ´ì‹ì„ ì‹œì‘í•˜ì„¸ìš”."
content.sound = .default
```

---

## 5. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 5.1 ë©”ëª¨ë¦¬
- View êµ¬ì¡°ì²´ ì‚¬ìš© (ê°’ íƒ€ì…)
- ViewModelë§Œ í´ë˜ìŠ¤ (@ObservableObject)
- ì˜ˆìƒ ë©”ëª¨ë¦¬: < 30MB

### 5.2 CPU
- Timer 1ì´ˆ ê°„ê²© (ê³¼ë„í•œ ì—…ë°ì´íŠ¸ ë°©ì§€)
- ì• ë‹ˆë©”ì´ì…˜ì€ SwiftUIì— ìœ„ì„
- ì˜ˆìƒ CPU: < 1%

### 5.3 ë°°í„°ë¦¬
- ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìµœì†Œí™”
- ì‹œìŠ¤í…œ Timer ì‚¬ìš© (íš¨ìœ¨ì )

---

*PixelOffice Pipeline - ê°œë°œ Phase ë¬¸ì„œ ì™„ë£Œ*
